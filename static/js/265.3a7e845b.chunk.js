"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[265],{2543:function(e,r,n){var t=n(1413),s=n(5987),i=n(8496),a=(n(2791),n(1134)),l=n(184),o=["name","control","label"];r.Z=function(e){var r=e.name,n=e.control,c=e.label,d=(0,s.Z)(e,o);return(0,l.jsx)(a.Qr,{name:r,control:n,render:function(e){var n=e.field,s=n.onChange,a=n.value,o=e.fieldState.error;e.formState;return(0,l.jsx)(i.Z,(0,t.Z)({variant:"outlined",margin:"normal",fullWidth:!0,required:!0,value:a,id:r,name:r,label:c,helperText:o?o.message:null,onChange:s,error:!!o},d))}})}},7265:function(e,r,n){n.r(r),n.d(r,{default:function(){return V}});var t=n(9439),s=n(2791),i=n(1241),a=n(9434),l=n(7689),o=n(4554),c=n(890),d=n(6927),u=n(915),x=n(4165),f=n(5861),m=n(5527),h=n(6151),p=n(3400),j=n(3538),Z=n(8856),v=n(9126),y=n(6355),g=n(3853),b=n(184),B=function(e){var r=e.profile;return(0,b.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,b.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,b.jsx)(Z.Z,{size:"25"}),(0,b.jsx)(c.Z,{sx:{ml:"5px"},children:r.email})]}),(0,b.jsx)("hr",{style:{border:"none",borderBottom:"1px solid #ccc",margin:"1rem 0"}}),(0,b.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,b.jsx)(g.fzv,{size:"25"}),(0,b.jsx)(c.Z,{sx:{ml:"5px"},children:r.username})]}),(0,b.jsx)("hr",{style:{border:"none",borderBottom:"1px solid #ccc",margin:"1rem 0"}}),(0,b.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,b.jsx)(v.t6A,{size:"25"}),(0,b.jsxs)(c.Z,{sx:{ml:"5px"},children:["Posts ",r.posts.length]})]}),(0,b.jsx)("hr",{style:{border:"none",borderBottom:"1px solid #ccc",margin:"1rem 0"}}),(0,b.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,b.jsx)(y.wN,{size:"25"}),(0,b.jsxs)(c.Z,{sx:{ml:"5px"},children:["Friends ",r.friends.length]})]}),(0,b.jsx)("hr",{style:{border:"none",borderBottom:"1px solid #ccc",margin:"1rem 0"}})]})},I=n(7892),S=n.n(I),w=n(1134),_=n(2543),k=n(4695),C=(n(3708),n(6727)),D=S()().startOf("day"),O=C.Ry().shape({username:C.Z_("Username must be a string").matches(/^[a-zA-Z0-9_-]{3,16}$/,"Username must be 3-16 characters long and can only contain alphanumeric characters, underscores and hyphens").required("This field can't be empty"),email:C.Z_("Email must be a string").email("Must be a valid email address").required("This field can't be empty"),dateOfBirth:C.nK().nullable(!0).test("valid-date","Date of birth must be a valid date",(function(e){return null===e||S()(e).isValid()})).test("max-date","Date of birth cannot be after today's date",(function(e){return null===e||S()(e).isBefore(D)||S()(e).isSame(D)}))}),F=n(4318),M=(n(2366),n(678)),z=n(1413),E=n(5970),U=n(9177),q=function(e){var r=e.control,n=e.errors;return(0,b.jsx)(w.Qr,{control:r,name:"dateOfBirth",render:function(e){var r=e.field,t=e.fieldState;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(U.M,(0,z.Z)((0,z.Z)({},r),{},{inputFormat:"yyyy-MM-dd",label:"Date of Birth",sx:{width:"100%"},error:!!t.error})),(0,b.jsx)(E.B,{errors:n,name:"dateOfBirth",render:function(e){var r=e.message;return(0,b.jsx)(c.Z,{sx:{color:"red"},children:r})}})]})}})},A=function(e){var r=e.setIsEdit,n=(0,l.s0)(),i=(0,a.I0)(),d=(0,a.v9)((function(e){return e.user})),u=(0,a.v9)((function(e){return e.loading})),m=(0,s.useState)(null),p=(0,t.Z)(m,2),Z=p[0],v=p[1],y=(0,s.useState)(null),g=(0,t.Z)(y,2),B=g[0],I=g[1],C=(0,w.cI)({defaultValues:{username:d?d.username:"",email:d?d.email:"",dateOfBirth:d?S()(d.dateOfBirth):null},resolver:(0,k.X)(O)}),D=C.handleSubmit,z=(C.reset,C.control),E=C.formState.errors,U=function(){var e=(0,f.Z)((0,x.Z)().mark((function e(t,s){var a,l,o,c;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.preventDefault(),a=s.target.username.value,l=s.target.email.value,o=new Date(t.dateOfBirth),c=S()(o).format("YYYY MM DD");try{i((0,M.Nq)(d._id,B,l,a,c,n)),r(!1)}catch(u){v(u.response)}case 6:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}();return d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(o.Z,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center",padding:"2rem"},children:[(0,b.jsx)(c.Z,{variant:"h2",children:"Profile"}),(0,b.jsx)(j.Z,{image:B,setImage:I,profile:d}),(0,b.jsxs)(o.Z,{component:"form",noValidate:!0,onSubmit:D(U),sx:{mt:1},children:[(0,b.jsx)(_.Z,{control:z,name:"username",label:"Username",autoFocus:!0}),(0,b.jsx)(_.Z,{control:z,name:"email",label:"Email",autoFocus:!0}),Z&&(0,b.jsx)(c.Z,{sx:{textAlign:"center",color:"red"},position:"center",variant:"h5",children:Z}),(0,b.jsx)(q,{control:z,errors:E}),(0,b.jsx)(h.Z,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",sx:{mt:3,mb:2},disabled:u,children:"Update"})]})]}),(0,b.jsx)(F.Z,{})]}):(0,b.jsx)("div",{children:"Loading..."})},T=n(9272),Y=n(8820),P=n(8617),R=function(e){var r=e.profile,n=(0,s.useState)(!1),i=(0,t.Z)(n,2),l=i[0],c=i[1],d=(0,a.I0)(),u=(0,a.v9)((function(e){return e.user})),Z=(0,s.useState)(""),v=(0,t.Z)(Z,2),y=(v[0],v[1]);if(!u||!r)return(0,b.jsx)(T.a,{});if(l)return(0,b.jsx)(A,{setIsEdit:c});var g=function(){var e=(0,f.Z)((0,x.Z)().mark((function e(){return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{d((0,M.SK)(r._id))}catch(n){y(n.response.data.error)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,f.Z)((0,x.Z)().mark((function e(){return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{d((0,M.tJ)(r._id))}catch(n){y(n.response.data.error)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",margin:"5rem 0"},children:[(0,b.jsxs)(m.Z,{elevation:3,sx:{padding:"2rem 5rem",display:"flex"},children:[(0,b.jsx)(j.Z,{profile:r}),(0,b.jsx)("div",{style:{borderRight:"1px solid #ccc",margin:"0 1rem"}}),(0,b.jsx)(B,{profile:r})]}),r._id===u._id?(0,b.jsx)(h.Z,{variant:"contained",color:"success",sx:{width:"640px"},onClick:function(){c(!0)},children:"Edit profile"}):u.friends.some((function(e){return e.friendId===r._id}))?(0,b.jsx)(p.Z,{onClick:I,children:(0,b.jsx)(P.XTR,{style:{color:"red"}})}):(0,b.jsx)(p.Z,{onClick:g,children:(0,b.jsx)(Y.vM4,{style:{color:"green"}})})]})};var V=function(){var e=(0,l.s0)(),r=(0,a.v9)((function(e){return e.user})),n=(0,l.UO)().id,x=(0,a.v9)((function(e){return e.loader})),f=(0,a.v9)((function(e){return e.error})),m=(0,s.useState)(null),h=(0,t.Z)(m,2),p=h[0],j=h[1];return(0,s.useEffect)((function(){return r?!p&&n&&(0,d.B)(e,{id:n,setProfile:j}):(0,d.B)(e),function(){p&&j(null)}}),[r,n,p,e]),r&&p?(0,b.jsxs)(b.Fragment,{children:[x&&(0,b.jsx)("p",{children:"Loading..."}),(0,b.jsx)(i.Z,{}),(0,b.jsxs)(o.Z,{children:[(0,b.jsx)(R,{profile:p}),(0,b.jsx)("hr",{}),(0,b.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,b.jsx)(u.Z,{userId:p._id})})]}),f&&(0,b.jsx)(c.Z,{sx:{textAlign:"center",color:"red"},position:"center",children:f.message}),(0,b.jsx)(F.Z,{})]}):(0,b.jsx)(T.a,{})}}}]);
//# sourceMappingURL=265.3a7e845b.chunk.js.map